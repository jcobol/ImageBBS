1 POKE 828, PEEK (186): CLR : PRINT "LOAD"
2 OPEN 131,2,134, CHR$ (6): POKE 248,203: POKE 250,204: POKE 56,160: POKE 52,160
4 DIM A,A$,A%,AB%,AC%,AF%,AM,AG$,AK$,AM$,AN$,AO%
6 DIM B,B$,BA%,BA$,BD,BF,BN,BN$,BR,BU,BZ
8 DIM C,C$,C1$,C2$,C3$,CA,CC$,CH$,CM$,CN,CO$,CO%,CR,CT,CT%,C9,C8,C7,C6
10 DIM D,D$,D1$,D1%,D2$,D2%,D3%,D3$,D4$,D5$,D6$,DA%,DB%,DC,DC%,DD$,DR,DR$,DV%
12 DIM E,E$,EL,EM,EF$,EP$,EC,EC%
14 DIM F,F$,F%,F1,F2,F3,F4,FF$,FL,FL$
16 DIM G,G$,G%,GS
18 DIM H,H$,H%
20 DIM I,I$,I%,I1$,I2$,I3$,ID
22 DIM J,J$,J%,JN$
24 DIM K,K$,K%,KP%,KZ
26 DIM L,L$,L%,L1,L1$,L2,L2$,L3,L3$,LC,LD$,LE,LF,LL$,LL%,LM$,LP,LT$,LN
28 DIM M,M$,M%,MC,MF,MM,MT$,MW,MP
30 DIM N,N$,N%,NA$,NC,ND,NF,NL,NL$,NM,NM$,NP,NR,NV
32 DIM O,O$,O%,OC$,OC%
34 DIM P,P$,P%,P1%,P2%,P3%,PF,PH$,PL,PM,PO$,PP$,PQ,PR,PR$,PS,PT%,PU$,PW$
36 DIM Q,Q$,Q%,QB,QE,QT$
38 DIM R,R$,R%,RC,RN$,RP,RQ,RS
40 DIM S,S$,S%,SA%,SH,SO%,SR,SY$,SG
42 DIM T,T$,T%,T1,TC%,TF,TR%,TT$,TZ
44 DIM U,U$,UC,UH,UL,UR
46 DIM V,V$,VV%
48 DIM W,W$,W%
50 DIM X,X$,X%
52 DIM Y,Y$,Y%
54 DIM Z,Z$,Z%,ZZ
56 AC% = 16:X = RND ( - TI):SG = .:BN$ = "":Z$ = ""
58 C1$ = "":C2$ = "":C3$ = ""
62 AK$ = " @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@" + "{RETURN}":O = 16400
64 R$ = CHR$ (13):NL$ = CHR$ (.):QT$ = CHR$ (34)
66 OPEN 4,4,7: POKE 836,1: POKE 650,128
70 POKE 56328,.: POKE 56579, PEEK (56579) OR 38: POKE 56577, PEEK (56577) OR 36
72 DIM TT$(254),BB$(41),DT$(91),ED$(91),NN$(91)
74 DIM A%(91),C%(91),D%(91),E%(31),F%(91),AC%(31),SO%(31)
76 DIM DV%(36),ST(38),CO$(9),FL$(9),DR%(36)
78 RESTORE : FOR I = 1 TO 9: READ A$:CO$(I) = A$ + "": NEXT
80 DV% = PEEK (828):DR$ = "0" + ":":TF = 1:SR = 2:PR = - 1:F3 = 1: SYS 49155
81 &,18,0: POKE 53248,1
82 AM$ = "1" + "8901299201"
83 GOSUB 180: POKE 17138,192
84 &" CONT{RVS-ON} :{RETURN}"
85 &" CONT{RVS-ON} :{RETURN}": CLOSE 2: CLOSE 15: OPEN 15,DV%,15
86 FL = .: OPEN 2,DV%,2,DR$ + "BD.DATA,S,R": GOSUB 1012: IF E% THEN CLOSE 2: GOTO 000
88 FOR X = 1 TO 6: INPUT# 2,DV%(X),DR%(X): NEXT
90 INPUT# 2,CC$,NC,NV,ND,BN$,PO$: CLOSE 2
92 DIM BF(6)
93 &" CONT{RVS-ON} :{RETURN}"
96 CLOSE 15: OPEN 15,DV%,15: GOSUB 800:&" CONT{RVS-ON} :{RETURN}"
98 GOSUB 1065: IF E% THEN CLOSE 2: GOSUB 156: GOTO 96
100 X = 1: GOSUB 1001: FOR I = 1 TO 14: INPUT# 2,TT$(I): NEXT : CLOSE 2:I1$ = TT$(7) + TT$(1)
102 I2$ = TT$(14) + TT$(5) + TT$(3) + " " + TT$(4)
104 GOSUB 1045:UH = A%
105 &"{HOME}\N9\N4 {RVS-ON}CONT : {WHITE} TOTALING USERS: \%A\_26CONT   "
106 &"{RETURN}{RETURN}{RETURN}{RETURN}"
107 A$ = "E.I.MACRO,S,R":DR = 3: GOSUB 1011: IF E% = . THEN :&,2,2:MC = VAL (A$): CLOSE 2
108 A$ = "E.I.PROMPT,S,R":DR = 3: GOSUB 1011: IF E% = . THEN :&,2,2:MP = VAL (A$): CLOSE 2
110 GOSUB 1063: IF E% THEN CLOSE 2: GOSUB 156: GOTO 110
112 X = 1: GOSUB 1001:&,2,2:CA = VAL (A$):X = 12: GOSUB 1001:&,2,2:UR = VAL (A$) - 1
114 X = 17: GOSUB 1001:&,2,2:D3$ = A$:X = 18: GOSUB 1001:&,2,2:PP$ = A$
116 X = 19: GOSUB 1001:&,2,2:Z$ = A$:X = 20: GOSUB 1001: INPUT# 2,P1%,P2%,P3%
118 FOR X = 21 TO 30: GOSUB 1001:&,2,2:FL$(X - 21) = A$: NEXT :X = 31: GOSUB 1001:&,2,2:L1 = VAL (A$)
120 X = VAL (I1$) + 2: GOSUB 1001:&,2,2:I3$ = A$
122 GOSUB 1060: FOR X = 1 TO 38: GOSUB 1001:&,2,2:ST(X) = VAL (A$): NEXT : CLOSE 2: GOSUB 200
123 &"{HOME}POKE":A$ = "E.AMAINT,S,R":DR = 3: GOSUB 1011: ON - (E% > 0) GOTO 126:&,2,2:AM$ = A$
124 AN$ = AM$:LT$ = AM$:&,15:D6$ = AN$: GOTO 128
126 GOSUB 160
128 CLOSE 2: GOSUB 150:&,37: POKE 53258,16 - ( PEEK (56577) AND 16): GOSUB 134
130 A$ = Z$: GOSUB 1520:T1 = A:AN$ = Z$:&,15:D2$ = AN$: FOR I = 54272 TO I + 24: POKE I,.: NEXT
131 DR = 1:A$ = "LBSETUP": GOSUB 1011: FOR X = . TO 31:&,2,2:&,52,X, VAL (A$): NEXT : CLOSE 2
132 GOTO 500: REM  BIOS MOD
133 F1 = 3:&,27:A$ = "LO": GOTO 1016
134 SYS 65484:A = VAL ( MID$ (Z$,1,1)): GOSUB 148: POKE 52935,A
136 A = VAL ( MID$ (Z$,2,2)): GOSUB 148: POKE 52938,A
138 A = VAL ( MID$ (Z$,4,2)): GOSUB 148: POKE 52936,A
140 A = VAL ( MID$ (Z$,6,2)): GOSUB 148: POKE 52937,A
142 A = VAL ( MID$ (Z$,8,2)): GOSUB 148:B = A: IF (B AND 127) = 18 THEN B = ( NOT B AND 128) OR 18
144 A = VAL ( MID$ (Z$,10,2)):A = A + (A < > 0): GOSUB 148: POKE 56331,B: POKE 56330,A
146 POKE 56329,89: POKE 56328,.: RETURN
148 A = 16 * INT (A / 10) + A - INT (A / 10) * 10: RETURN
150 FOR Q = . TO 6:BF(Q) = - 1: NEXT
152 RETURN
160 A$ = "E.LOG":DR = 3: GOSUB 1011: IF E% THEN GOSUB 164
162 &,2,2:D6$ = MID$ (A$,10): RETURN
164 A$ = "E.LOG": GOSUB 1023:AN$ = Z$:&,15:D6$ = AN$
166 A$ = "FOR START--" + D6$: PRINT# 2,A$:A$ = MID$ (A$,2): GOSUB 1096
168 A$ = "DEF" + LEFT$ (AK$,27) + "{RETURN}": PRINT# 2,A$:A$ = MID$ (A$,2): GOSUB 1096
170 A$ = LEFT$ (AK$,24): PRINT# 2,A$: GOSUB 1096
172 CLOSE 2: GOSUB 1060: FOR X = 12 TO 22:ST(X) = .: GOSUB 1026: NEXT :ST(20) = .: GOTO 1026
180 FOR Y = 1 TO 12: READ A%(Y): NEXT : FOR Y = 1 TO 12: READ ED$(Y): NEXT :&"{HOME}\N4"
181 FOR Y = 1 TO 12:A$ = ED$(Y):B$ = CHR$ (A%(Y)):&" CONT{RVS-ON}   {WHITE}\$A\_26CONT \$B {RETURN}": NEXT
184 A$ = "RS232": GOSUB 190: SYS 17152:&"{HOME}\N6 {RVS-ON}CONT :{RETURN}"
185 A$ = "PMODES": GOSUB 190:&" {RVS-ON}CONT :{RETURN}": RETURN
190 SYS (57812)DR$ + "ML." + A$,DV%,1: POKE 780,0
191 SYS 65493
192 A = PEEK (780):C = PEEK (783) AND 1: IF C = 1 AND A = 5 THEN :&"NOT FOUND{RETURN}": RETURN
193 IF C = 1 THEN :&"{HOME}\N9\N9\_15{WHITE}[{RVS-ON}DEFLOAD ERROR{WHITE}]{RETURN}"
194 RETURN
200 &"{RETURN}PRINT - LOADING - ": RETURN
201 &"{RETURN}PRINT - CMD CLOCK UTILIZED - "
205 PRINT# 15,"T-RA":&,2,15: GOSUB 990: RETURN
500 GOTO 133: POKE 53252,20: GOTO 502
502 FOR A = 1 TO 6:TT$(A * 2 - 1) = MID$ ( STR$ (DV%(A)),2):TT$(A * 2) = MID$ ( STR$ (DR%(A)),2): NEXT
504 TT$(13) = CC$:TT$(14) = MID$ ( STR$ (NC),2)
506 TT$(15) = MID$ ( STR$ (NV),2):TT$(16) = MID$ ( STR$ (ND),2)
508 TT$(17) = BN$:TT$(18) = PO$
510 TT$(19) = "1.2 IMAGE OFFLINE READER V1.0 - FUTURE SYSTEMS"
512 B$ = "OFFLINE READER BIOS": GOSUB 606:C = .
514 A% = 1:B$ = "NONE": GOSUB 602
516 A% = 2:B$ = "NONE": GOSUB 602
518 A% = 3:B$ = "SYSTEM DRIVES": GOSUB 602
520 A% = 4:B$ = "HIGHEST SERIAL DRIVE": GOSUB 602
522 A% = 5:B$ = "NONE": GOSUB 602
524 A% = 6:B$ = "NONE": GOSUB 602
526 A% = 7:B$ = "MAIN LEVEL PROMPT": GOSUB 602
528 A% = 8:B$ = "SAVE CHANGES": GOSUB 602
530 A% = 9:B$ = "BOOT OFFLINE READER": GOSUB 602
532 GOSUB 604: ON A GOSUB 000,000,554,580,000,000,612,534,133: GOTO 512
534 B$ = "SAVE CHANGES": GOSUB 606
536 &"{RETURN}{RETURN}READY?{RETURN}{RETURN}"
538 &"PRESS RETURN TO CONTINUE, OR READAREAD TO{RETURN}ABORT:\G1": IF AN$ < > R$ THEN RETURN
540 &"{RETURN}{RETURN}SAVING BIOS...{RETURN}{RETURN}\W2"
542 CLOSE 15: CLOSE 2: OPEN 15,DV%,15,"S0:BD.DATA": OPEN 2,DV%,2,"0:BD.DATA,S,W"
544 FOR I = 1 TO 19: PRINT# 2,TT$(I): NEXT : CLOSE 2
546 &"DONE!{RETURN}": RETURN
548 &"{RETURN}{RETURN}CHANGES SAVED... NO NEED TO SAVE FROM{RETURN}MENU.{RETURN}{RETURN}": GOTO 546
550 GOSUB 1063:X = 20: GOSUB 1002: PRINT# 2,P1%","P2%","P3%: CLOSE 2: RETURN
552 ON C GOTO 548: RETURN
554 B$ = "SYSTEM DEVICES": GOSUB 606
556 A% = 1:B$ = "SYSTEM DISK   : " + TT$(1) + "," + TT$(2): GOSUB 602
558 A% = 2:B$ = "E-MAIL DISK   : " + TT$(3) + "," + TT$(4): GOSUB 602
560 A% = 3:B$ = "ETCETERA DISK : " + TT$(5) + "," + TT$(6): GOSUB 602
562 A% = 4:B$ = "DIRECTORY DISK: " + TT$(7) + "," + TT$(8): GOSUB 602
564 A% = 5:B$ = "P-FILE DISK   : " + TT$(9) + "," + TT$(10): GOSUB 602
566 A% = 6:B$ = "USER DISK     : " + TT$(11) + "," + TT$(12): GOSUB 602
568 GOSUB 604: ON TR% + 1 GOTO 1811:R = A:X = A
570 ON - (AN$ = R$ OR AN$ = "Q") GOTO 512: GOSUB 574: GOTO 554
572 ON SGN (R) GOTO 554: RETURN
574 P$ = "DEVICE":W$ = TT$(X * 2 - 1): GOSUB 610:TT$(X * 2 - 1) = AN$
576 P$ = "DRIVE ":W$ = TT$(X * 2): GOSUB 610:TT$(X * 2) = AN$: RETURN
578 TT$(17) = AN$: RETURN
580 &"{RETURN}WHAT IS THE HIGHEST DEVICE NUMBER YOU{RETURN}"
582 &"HAVE CONNECTED TO YOUR SYSTEM?{RETURN}{RETURN}"
584 &"EXAMPLE--DEVICE 9 OR DEVICE 11{RETURN}"
586 P$ = "DEVICE":W$ = MID$ ( STR$ ( VAL (TT$(15)) + 7),2): GOSUB 610: IF TR% = . THEN RETURN
588 IF A < 8 OR A > 31 THEN 586
590 TT$(15) = STR$ (A - 7):&"{RETURN}{RETURN}WHAT IS THE HIGHEST DRIVE/LU NUMBER{RETURN}"
592 &"YOU HAVE CONNECTED TO YOUR SYSTEM?{RETURN}{RETURN}"
594 &"EXAMPLE--A 1541=0 A LT. KERNAL{RETURN}WITH ALL LU'S DEFINED=9{RETURN}"
596 P$ = "DRIVE ":W$ = TT$(16): GOSUB 610: IF TR% < 1 THEN RETURN
598 IF A < . OR A > 9 THEN 596
600 TT$(16) = AN$: RETURN
602 &"\_08SYS\%A>OPEN \$B{RETURN}": RETURN
604 &"{RETURN}\_13OPTION? \G1\V7{RETURN}": GOTO 2
606 &"LOAD{WHITE}\VJ OPEN\_" + RIGHT$ ( STR$ ( INT (120 - LEN (B$) / 2)),2)
608 &"\$B{RETURN}{WHITE}\VJOPEN": RETURN
610 B$ = W$:PL = 1:&,1,32: ON - (AN$ < > "") GOTO 2:AN$ = B$: GOTO 2
612 B$ = "MAIN PROMPT": GOSUB 606
614 P$ = "MAIN PROMPT":W$ = TT$(18): GOSUB 610: IF TR% = . THEN RETURN
616 TT$(18) = AN$: RETURN
618 :{$fe}$LINE
800 &" {RVS-ON}CONT :{RETURN}":DR = 3: GOSUB 1010
802 M = 234: SYS (57812)DR$ + "ML.ECSDEFS",DV%: POKE 780,0: POKE 781,0: POKE 782,M: SYS 65493
804 A = PEEK (780):C = PEEK (783) AND 1: IF S = 128 AND A = 5 THEN :&"NOT FOUND{RETURN}": RETURN
806 IF C = 1 THEN :&"{HOME}\N9\N9\_15{WHITE}[{RVS-ON}DEFLOAD ERROR{WHITE}]{RETURN}": RETURN
900 DATA "COMMODORE 64","COMMODORE 128","AMIGA","APPLE/COMP."
902 DATA "IBM/COMP.","MACINTOSH","ATARI/ST","TANDY SERIES","OTHER TYPE"
904 DATA 32,32,32,32,32,32,32,32,32,32,32,32,"CONT       SETUP","       #####"
905 DATA " RS-232 DATA"," PRINT DEFS"," ECS DEFS"," DIMENSIONING ARRAYS"
906 DATA " CONFIGURING DATA"," CHECKING DRIVES"," VERIFYING INFO"," TOTALING USERS"
907 DATA "","CONT"
990 Z$ = LEFT$ (A$,2):A = - (Z$ = "SU") - 2 * (Z$ = "MO") - 3 * (Z$ = "TU") - 4 * (Z$ = "WE") - 5 * (Z$ = "TH")
991 A = A - 6 * (Z$ = "FR") - 7 * (Z$ = "SA"):Z$ = MID$ ( STR$ (A),2,1) + MID$ (A$,12,2) + MID$ (A$,6,2)
992 A = - 80 * ( MID$ (A$,24,1) = "P") + VAL ( MID$ (A$,15,2))
993 Z$ = Z$ + MID$ (A$,9,2) + RIGHT$ ("0" + MID$ ( STR$ (A),2),2) + MID$ (A$,18,2):TF = 0: RETURN
999 :{$fe}$LINE READ ER V1.0 -  FS'98
